{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
    <h2>Transactions for {{ user.name }} ({{ user.username }})</h2>

    {% if transactions %}
        <table class="table table-striped mt-4">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Type</th>
                    <th>Amount</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
            {% for tx in transactions %}
                <tr>
                    <td>{{ "TNX" + tx.local_timestamp.strftime('%Y%m%d') + ("%04d"|format(tx.id)) }}</td>
                    <td>{{ tx.local_timestamp.strftime('%b %d, %Y at %I:%M %p') }}</td>
                    <td>{{ 'Credit' if tx.amount > 0 else 'Debit' }}</td>
                    <td>â‚¹{{ tx.amount }}</td>
                    <td>{{ tx.status }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No transactions available.</p>
    {% endif %}
</div>
{% endblock %}

<h3>Recent Recipients</h3>
<ul>
  {% for contact in saved_contacts %}
    <li>
      <button type="button" onclick="prefillTransfer('{{ contact.name }}', '{{ contact.account_number }}')">
        <img src="{{ url_for('static', filename='img/user-icon.png') }}" width="30"> 
        {{ contact.name }} ({{ contact.account_number }})
      </button>
    </li>
  {% endfor %}
</ul>

<script>
  function prefillTransfer(name, accNo) {
    document.getElementById('beneficiary_name').value = name;
    document.getElementById('account_number').value = accNo;
  }
</script>

<!-- Save Contact Checkbox -->
<div>
  <input type="checkbox" name="save_contact" id="save_contact">
  <label for="save_contact">Save this contact</label>
</div>

